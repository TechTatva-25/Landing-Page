(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3736:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>o}),a(4753),a(2029),a(5866);var r=a(3191),s=a(8716),n=a(7922),i=a.n(n),l=a(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,4753)),"/Users/shubhampanda/Desktop/newmhash/Landing-Page/src/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,2029)),"/Users/shubhampanda/Desktop/newmhash/Landing-Page/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/shubhampanda/Desktop/newmhash/Landing-Page/src/app/admin/page.tsx"],p="/admin/page",u={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4239:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,2619,23)),Promise.resolve().then(a.t.bind(a,4759,23))},4451:()=>{},2887:(e,t,a)=>{Promise.resolve().then(a.bind(a,4189))},5047:(e,t,a)=>{"use strict";var r=a(7389);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},4189:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(326),s=a(5047),n=a(7577),i=a(5500);let l=()=>{let[e,t]=(0,n.useState)([]),[a,l]=(0,n.useState)(!0),[d,o]=(0,n.useState)(1),[c,p]=(0,n.useState)(1),[u,h]=(0,n.useState)({resolved:!1}),m=(0,s.useRouter)(),[x,b]=(0,n.useState)(0),g=async e=>{l(!0);try{let a=document.location.search.slice(1).split("&")[0].split("=")[1];if(!a){m.push("/");return}let r=await fetch(`/api/v1/admin?token=${a}&page=${e}&perPage=30&id=${u.id??""}&name=${u.name??""}&email=${u.email??""}&query=${u.query??""}&resolved=${u.resolved??""}`);if(403===r.status){m.push("/");return}if(200===r.status){let e=(await r.json())?.data;t(e.queries),p(e.pagination.totalPages),b(e.pagination.totalRecords),o(e.pagination.currentPage)}}catch(e){console.error("Error fetching queries:",e),alert("Failed to fetch queries.")}finally{l(!1)}};(0,n.useEffect)(()=>{g(d)},[d,u]);let y=async(a,r)=>{if(confirm(`Changing status to [ ${r?"RESOLVED":"NOT resolved"} ]

Are you sure?`))try{let s=document.location.search.slice(1).split("&")[0].split("=")[1];if(!s){m.push("/");return}let n=await fetch(`/api/v1/admin?token=${s}`,{method:"PUT",body:JSON.stringify({id:a,resolved:r})});if(403===n.status){m.push("/");return}if(200===n.status){let s=await n.json();s.ok?t(e.map(e=>e.id===a?{...e,resolved:r}:e)):alert(s.message??"Error updating query status.")}}catch(e){console.error("Error updating query:",e),alert("An error occurred while updating the query.")}},v=(e,t)=>{h(a=>({...a,[t]:"checkbox"===e.target.type?e.target.checked:e.target.value}))};return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-end gap-4",children:[r.jsx("input",{type:"text",placeholder:"Filter by ID",value:u.id,onChange:e=>v(e,"id"),className:"rounded border px-4 py-2"}),r.jsx("input",{type:"text",placeholder:"Filter by Name",value:u.name,onChange:e=>v(e,"name"),className:"rounded border px-4 py-2"}),r.jsx("input",{type:"text",placeholder:"Filter by Email",value:u.email,onChange:e=>v(e,"email"),className:"rounded border px-4 py-2"}),r.jsx("input",{type:"text",placeholder:"Filter by Query",value:u.query,onChange:e=>v(e,"query"),className:"rounded border px-4 py-2"}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"resolvedFilter",children:"Resolved "}),r.jsx("input",{id:"resolvedFilter",type:"checkbox",checked:!!u.resolved,onChange:e=>v(e,"resolved"),className:"rounded border px-4 py-2"})]}),"|\xa0\xa0\xa0Count: ",x]}),r.jsx("div",{children:a?r.jsx("p",{className:"text-center text-lg",children:"Loading..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("table",{className:"min-w-full table-auto border-collapse",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[r.jsx("th",{className:"border-b px-4 py-2",children:"ID"}),r.jsx("th",{className:"border-b px-4 py-2",children:"Name"}),r.jsx("th",{className:"border-b px-4 py-2",children:"Email"}),r.jsx("th",{className:"border-b px-4 py-2",children:"Query"}),r.jsx("th",{className:"border-b px-4 py-2",children:"Created"}),r.jsx("th",{className:"border-b px-4 py-2",children:"Updated"}),r.jsx("th",{className:"border-b px-4 py-2",children:"Status"}),r.jsx("th",{className:"border-b px-4 py-2",children:"Actions"})]})}),r.jsx("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"border-b px-4 py-2",children:e.id}),r.jsx("td",{className:"border-b px-4 py-2",children:e.name}),r.jsx("td",{className:"border-b px-4 py-2",children:r.jsx("a",{className:"hover:text-blue-700 hover:underline",href:`mailto:${e.email}`,children:e.email})}),r.jsx("td",{className:"border-b px-4 py-2",children:e.query}),r.jsx("td",{className:"border-b px-4 py-2",children:(0,i.p)(e.createdAt)}),r.jsx("td",{className:"border-b px-4 py-2",children:(0,i.p)(e.updatedAt)}),r.jsx("td",{className:"border-b px-4 py-2",children:e.resolved?"RESOLVED":"NOT resolved"}),r.jsx("td",{className:"border-b px-4 py-2",children:r.jsx("button",{onClick:()=>y(e.id,!e.resolved),className:"mr-2 rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-700",children:"Toggle Status"})})]},e.id))})]}),c>1&&(0,r.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-4",children:[r.jsx("button",{onClick:()=>{d>1&&o(d-1)},disabled:1===d,className:"rounded-lg bg-blue-500 px-4 py-2 text-white disabled:bg-gray-400",children:"Previous"}),(0,r.jsxs)("span",{className:"text-lg",children:["Page ",d," of ",c]}),r.jsx("button",{onClick:()=>{d<c&&o(d+1)},disabled:d===c,className:"rounded-lg bg-blue-500 px-4 py-2 text-white disabled:bg-gray-400",children:"Next"})]})]})})]})}},5500:(e,t,a)=>{"use strict";a.d(t,{p:()=>r});let r=e=>new Date(new Date(e).getTime()+198e5).toLocaleString("en-GB",{weekday:void 0,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:void 0}).replace(",","").replace("/","-").replace("/","-")},4753:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`/Users/shubhampanda/Desktop/newmhash/Landing-Page/src/app/admin/page.tsx#default`)},2029:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v,metadata:()=>y});var r=a(9510),s=a(6101),n=a.n(s),i=a(4552),l=a.n(i),d=a(4344),o=a.n(d),c=a(511),p=a.n(c),u=a(3790),h=a.n(u),m=a(1868),x=a.n(m),b=a(2025),g=a.n(b);a(4315),a(1159);let y=(0,a(6109).s)("TechTatva 25");function v({children:e}){return(0,r.jsxs)("html",{lang:"en",className:`${n().variable} ${l().variable} ${o().variable} ${p().variable} ${h().variable} ${x().variable} ${g().variable}`,children:[r.jsx("head",{children:r.jsx("link",{rel:"icon",href:"/favicon.ico",sizes:"any"})}),r.jsx("body",{className:"bg-black",children:e})]})}},6109:(e,t,a)=>{"use strict";function r(e){return{title:e,description:"MIT Manipal's National level Annual Sports and Cultural Fest",openGraph:{title:e,description:"MIT Manipal's National level Annual Sports and Cultural Fest",url:"https://revelsmit.in/",siteName:"TechTatva 25",images:[{url:"https://revelsmit.in/favicon.png",width:1733,height:1733,alt:"TechTatva 25"}],type:"website"},twitter:{card:"summary_large_image",title:e,description:"MIT Manipal's National level Annual Sports and Cultural Fest",creator:"MIT Manipal",images:"https://revelsmit.in/favicon.png"}}}a.d(t,{s:()=>r})},4315:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,34],()=>a(3736));module.exports=r})();