(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[785],{9:function(e,t,s){Promise.resolve().then(s.bind(s,2950))},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},2950:function(e,t,s){"use strict";s.r(t);var r=s(7437),a=s(9376),n=s(2265),l=s(9953);t.default=()=>{let[e,t]=(0,n.useState)([]),[s,i]=(0,n.useState)(!0),[d,c]=(0,n.useState)(1),[o,p]=(0,n.useState)(1),[u,x]=(0,n.useState)({}),h=(0,a.useRouter)(),[b,g]=(0,n.useState)(0),m=async e=>{i(!0);try{let r=document.location.search.slice(1).split("&")[0].split("=")[1];if(!r){h.push("/");return}let a=new URLSearchParams({token:r,page:e.toString(),perPage:"30",...u}).toString(),n=await fetch("/api/v1/adminLogs?".concat(a.toString()));if(403===n.status){h.push("/");return}if(200===n.status){var s;let e=null===(s=await n.json())||void 0===s?void 0:s.data;t(e.logs),p(e.pagination.totalPages),g(e.pagination.totalRecords),c(e.pagination.currentPage)}}catch(e){console.error("Error fetching queries:",e),alert("Failed to fetch queries.")}finally{i(!1)}};(0,n.useEffect)(()=>{m(d)},[d,u]);let y=(e,t)=>{x(s=>({...s,[t]:"checkbox"===e.target.type?e.target.checked:e.target.value}))};return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-end gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Filter by ID",value:u.id,onChange:e=>y(e,"id"),className:"rounded border px-4 py-2"}),(0,r.jsx)("input",{type:"text",placeholder:"Filter by IP Address",value:u.ip,onChange:e=>y(e,"ip"),className:"rounded border px-4 py-2"}),(0,r.jsx)("input",{type:"text",placeholder:"Filter by ISP",value:u.isp,onChange:e=>y(e,"isp"),className:"rounded border px-4 py-2"}),(0,r.jsx)("input",{type:"text",placeholder:"Filter by Location",value:u.location,onChange:e=>y(e,"location"),className:"rounded border px-4 py-2"}),(0,r.jsx)("input",{type:"text",placeholder:"Filter by User Agent",value:u.userAgent,onChange:e=>y(e,"userAgent"),className:"rounded border px-4 py-2"}),"|\xa0\xa0\xa0Count: ",b]}),(0,r.jsx)("div",{children:s?(0,r.jsx)("p",{className:"text-center text-lg",children:"Loading..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("table",{className:"min-w-full table-auto border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"border-b px-4 py-2",children:"ID"}),(0,r.jsx)("th",{className:"border-b px-4 py-2",children:"IP Address"}),(0,r.jsx)("th",{className:"border-b px-4 py-2",children:"ISP"}),(0,r.jsx)("th",{className:"border-b px-4 py-2",children:"Location"}),(0,r.jsx)("th",{className:"border-b px-4 py-2",children:"User Agent"}),(0,r.jsx)("th",{className:"border-b px-4 py-2",children:"Created"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border-b px-4 py-2",children:e.id}),(0,r.jsx)("td",{className:"border-b px-4 py-2",children:e.ip}),(0,r.jsx)("td",{className:"border-b px-4 py-2",children:e.isp}),(0,r.jsx)("td",{className:"border-b px-4 py-2",children:e.location}),(0,r.jsx)("td",{className:"border-b px-4 py-2",children:e.userAgent}),(0,r.jsx)("td",{className:"border-b px-4 py-2",children:(0,l.p)(e.createdAt)})]},e.id))})]}),o>1&&(0,r.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-4",children:[(0,r.jsx)("button",{onClick:()=>{d>1&&c(d-1)},disabled:1===d,className:"rounded-lg bg-blue-500 px-4 py-2 text-white disabled:bg-gray-400",children:"Previous"}),(0,r.jsxs)("span",{className:"text-lg",children:["Page ",d," of ",o]}),(0,r.jsx)("button",{onClick:()=>{d<o&&c(d+1)},disabled:d===o,className:"rounded-lg bg-blue-500 px-4 py-2 text-white disabled:bg-gray-400",children:"Next"})]})]})})]})}},9953:function(e,t,s){"use strict";s.d(t,{p:function(){return r}});let r=e=>new Date(new Date(e).getTime()+198e5).toLocaleString("en-GB",{weekday:void 0,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:void 0}).replace(",","").replace("/","-").replace("/","-")}},function(e){e.O(0,[971,117,744],function(){return e(e.s=9)}),_N_E=e.O()}]);